<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header</title>

    <link rel="stylesheet" href="../assets/css/Global.css">
    <link rel="stylesheet" href="../assets/css/Header.css">
    <link rel="stylesheet" href="../assets/css/Footer.css">

    <link rel="stylesheet" href="../assets/css/pages/index.css">

</head>

<body>
    <header>
        <!-- ***** Logo Start ***** -->
        <a href="index.html" class="logo">
            <img src="../assets/images/x5gon-icon.png" alt="X5GON">
        </a>
        <!-- ***** Logo End ***** -->
        <!-- ***** Menu Start ***** -->
        <ul class="menu" id="menu">
            <li class="submenu">
                <a class="mainlink" href="index.html">Home</a>
            </li>
            <li class="submenu">
                <a class="mainlink" href="requirements.html">Requirements</a>
            </li>
            <li class="submenu" class="submenu">
                <a class="mainlink" href="hci.html">HCI</a>
            </li>
            <li class="submenu" class="submenu">
                <a class="mainlink" href="research.html">Research</a>
            </li>
            <li class="submenu" class="submenu">
                <a class="mainlink" href="design.html">Design</a>
            </li>
            <li class="submenu" class="submenu">
                <a class="mainlink" href="implementation.html">Implementation</a>
            </li>
            <li class="submenu" class="submenu">
                <a class="mainlink" href="testing.html">Testing</a>
            </li>
            <li class="submenu" class="submenu">
                <a class="mainlink" href="evaluation.html">Evaluation</a>
            </li>
            <li class="submenu" class="submenu">
                <a class="mainlink" href="appendix.html">Appendix</a>
            </li>
        </ul>
        <a class='menu-mobile'>
            <span>Menu</span>
        </a>
        <!-- ***** Menu Start ***** -->
    </header>

    <!-- the first re-usable section with topic and contents -->
    <section class="section" id="front-end">
        <!-- topic -->
        <h3>Frontend Implementation</h3>
        <!-- contents -->
        <p>[Insert text]</p>
    </section>

    <!-- the first re-usable section with topic and contents -->
    <section class="section" id="search">
        <!-- topic -->
        <h3>Search Implementation</h3>
        <!-- contents -->
        <p>[Insert text]</p>
    </section>

    <!-- the first re-usable section with topic and contents -->
    <section class="section" id="user-data">
        <!-- topic -->
        <h3>User Data/Login Implementation</h3>
        <!-- contents -->
        <h4>User Login Implementation</h4>
        <p>We create a PostgreSQL to collect the user details. We made the following API endpoint: register, login, and user-detail for handling the user action related to login functionality</p>
        <h5>Related API implementation</h5>
        <p>Register - /register</p>
        <ul>
            <li>we collect the username, password, displayname, and email from the user. After that we are quering the database if the username and email has been taken. If those are not taken the new user will be generated with the following parameter userID,
                username, password(hashed with salt), salt, displayname, public-id(the id expose to the frontend), timestamp </li>
        </ul>
        <p>Login - /login</p>
        <ul>
            <li>we collect the username, password from the user. If that user does exist the API will make the json web token (JWT) using genJWT() with expired date</li>
        </ul>
        <p>User Details - /user-detail</p>
        <ul>
            <li>we collect the JWT from the user. Then we check if the token is valid by using jwt_token() function. If the JWT is valid we are going to send user-details</li>
        </ul>
        <h5>Implementation on the frontend</h5>
        <p>Register</p>
        <ul>
            <li>we make a form to collect user input then fetch API </li>
            <img src="../assets/images/implementation/signup.PNG" alt="">
            <li>Then redirect to login page after user is registered </li>
            <li>and warn the user if the username/email is taken by pop up our alert components</li>
            <img src="../assets/images/implementation/alert_username_taken.PNG" alt="">
        </ul>
        <p>Login</p>
        <ul>
            <li>Normally, the user will not be login. User islogin and user detail are stored in the redux and backed-up in the localstorage </li>
            <img src="../assets/images/implementation/header.PNG" alt="">
            <li>User can login via login form</li>
            <img src="../assets/images/implementation/login.PNG" alt="">
            <li>If user is sucessfully login, the frontend will recieve JWT token from the api, which store in the cookies. After that, the frontend will fetch the api for retrieving user-detail which will update the user-detail and login status</li>
            <img src="../assets/images/implementation/redux-tools.PNG" alt="">
            <li>Later, the application will re-direct back to main page</li>
            <img src="../assets/images/implementation/header_login.PNG" alt="">
        </ul>

        <h4>User Data Implementation</h4>
        <p>We create a PostgreSQL to collect the search-history and click-history. We made the following API endpoint: search-history and click-history for handling the user action related to user data functionality</p>
        <h5>Related API implementation</h5>
        <p>Search History - /search-history</p>
        <ul>
            <li>This endpoint objective is to collect user data when user searching. We collect the user Query, Filter, TopDocumentID and PublicID from the user. If that user does exist, PublicID's value is null</li>
        </ul>
        <p>Click History - /click-history</p>
        <ul>
            <li>This endpoint objective is to collect user data when user click on the url. We collect the username, password from the user. If that user does exist the API will make the json web token (JWT) using genJWT() with expired date</li>
        </ul>

        <h5>Implementation on the frontend</h5>
        <p>Search History</p>
        <ul>
            <li>After the user finish searching for the query. The application will make a temporary store query in the session storage "search_result". Then the react useEffect hook will check if the session storage "search_result" is not null. Then the
                frontend will fetch api to collect search-history</li>
        </ul>
        <p>Click History</p>
        <ul>
            <li>When the user click on the search result, collectClickHistory(), function that collect document_id document_pos and search_id, function will be triggered</li>
        </ul>
    </section>